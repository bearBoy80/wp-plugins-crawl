{"name":"Opt-In","slug":"bin-opt-in","version":"1.2.3","author":"<a href=\"https:\/\/berginformatik.ch\">Berg Informatik<\/a>","author_profile":"https:\/\/profiles.wordpress.org\/berginformatik\/","contributors":{"berginformatik":{"profile":"https:\/\/profiles.wordpress.org\/berginformatik\/","avatar":"https:\/\/secure.gravatar.com\/avatar\/a86760a92ec0d60dbb6fe6e1818aa15c?s=96&d=monsterid&r=g","display_name":"Berg Informatik"}},"requires":"4.9.8","tested":"5.9.8","requires_php":false,"requires_plugins":[],"rating":0,"ratings":{"5":0,"4":0,"3":0,"2":0,"1":0},"num_ratings":0,"support_threads":0,"support_threads_resolved":0,"active_installs":10,"last_updated":"2022-09-16 8:39am GMT","added":"2019-10-28","homepage":"https:\/\/berginformatik.ch\/plugin\/bin-opt-in","sections":{"installation":"<ol>\n<li>Download, unzip and upload to your WordPress plugins directory<\/li>\n<li>Activate the plugin within you WordPress Administration Backend<\/li>\n<\/ol>\n","changelog":"<ul>\n<li>Version 1.2.3\n<ul>\n<li>Image embedding removed: not supported by gmail<\/li>\n<li>Translation corrections<\/li>\n<\/ul>\n<\/li>\n<li>Version 1.2.2\n<ul>\n<li>Minor bugfix<\/li>\n<\/ul>\n<\/li>\n<li>Version 1.2.2\n<ul>\n<li>Fix: fatal error if bin-contact is not installed<\/li>\n<\/ul>\n<\/li>\n<li>Version 1.2.0\n<ul>\n<li>New: Mailchimp integration<\/li>\n<li>New: Add default settings on plugin activate<\/li>\n<li>New: Text settings<\/li>\n<li>New: Change button color<\/li>\n<li>Fix: Wrong link to wpml translation page<\/li>\n<li>Fix: Wrong installation path of bin-contact plugin<\/li>\n<li>Fix: Missing hero background image<\/li>\n<\/ul>\n<\/li>\n<li>Version 1.1.0\n<ul>\n<li>New option for Social Share Buttons<\/li>\n<li>BinOptIn_UrlLinker removed<\/li>\n<li>Double-opt-in routing fix<\/li>\n<li>Show additional content on confirmation page<\/li>\n<li>Logo height setting added<\/li>\n<li>Image embed enhancements<\/li>\n<li>Attribute publicly_visible added<\/li>\n<li>Wpml-config file added<\/li>\n<li>More options for optIn<\/li>\n<li>Better email template management<\/li>\n<\/ul>\n<\/li>\n<li>Version 1.0.1\n<ul>\n<li>Backend text correction<\/li>\n<li>Conditional logic update<\/li>\n<li>Do not delete settings on plugin deactivate<\/li>\n<\/ul>\n<\/li>\n<li>Version 1.0.0\n<ul>\n<li>Initial release<\/li>\n<\/ul>\n<\/li>\n<\/ul>\n","description":"<p>Provides features and functions to create an opt-in or double-opt in with contact form 7 (cf7) and other form plugins.<\/p>\n<h3>Save contacts<\/h3>\n<p>To store your contacts, please install the additional plugin called bin contact. This plugin assists you installing all the necessary dependencies.<\/p>\n<h3>Opt-In Function<\/h3>\n<pre>BinOptIn::optIn($postdata, [\n    'opt_in_admin_message' =&gt; false,\n    'double_opt_in' =&gt; false,\n    'admin_unlock' =&gt; false,\n    'unlock_message' =&gt; false\n]);<\/pre>\n<ul>\n<li>\n<p><strong>opt_in_admin_message<\/strong><br \/>\n(bool) Notify the site owner of any new contact, regardless of whether or not he has confirmed his e-mail address. Default false.<\/p>\n<\/li>\n<li>\n<p><strong>double_opt_in<\/strong><br \/>\n(bool) The contact must confirm the e-mail address by clicking on a confirmation link. Default false.<\/p>\n<\/li>\n<li>\n<p><strong>admin_unlock<\/strong><br \/>\n(bool) The site owner has to confirm every new contact by clicking on a confirmation link. This is useful if you want to show a list of contacts (like a committee or a list of supporters). Default false.<\/p>\n<\/li>\n<li>\n<p><strong>unlock_message<\/strong><br \/>\n(bool) This option allows you to specify whether the contact should receive a notification once the site owner has confirmed the committee subscription. Default false.<\/p>\n<\/li>\n<li>\n<p><strong>mailchimp_opt_in<\/strong><br \/>\n(bool) This option allows you to specify whether the contact will be forwarded to Mailchimp. Default false.<\/p>\n<\/li>\n<\/ul>\n<h3>Accepted postdata<\/h3>\n<ul>\n<li>\n<p><strong>salutation<\/strong><br \/>\n(int) Default empty.<\/p>\n<ul>\n<li>0 (Mister)<\/li>\n<li>1 (Miss)<\/li>\n<li>2 (Other)<\/li>\n<\/ul>\n<\/li>\n<li>\n<p><strong>polite_form<\/strong><br \/>\n(int) Default empty.<\/p>\n<ul>\n<li>0 (Personally)<\/li>\n<li>1 (Formally)<\/li>\n<\/ul>\n<\/li>\n<li>\n<p><strong>language_of_correspondence<\/strong><br \/>\n(int) Check this functions to see a list of all available languages: BinContact::formLanguage() and BinContact::formLanguageValue()<\/p>\n<\/li>\n<li>\n<p><strong>name_suffix<\/strong><br \/>\n(string) Default empty.<\/p>\n<\/li>\n<li>\n<p><strong>first_name<\/strong><br \/>\n(string) Default empty.<\/p>\n<\/li>\n<li>\n<p><strong>last_name<\/strong><br \/>\n(string) Default empty.<\/p>\n<\/li>\n<li>\n<p><strong>designation<\/strong><br \/>\n(string) Default empty.<\/p>\n<\/li>\n<li>\n<p><strong>mobile<\/strong><br \/>\n(string) Default empty.<\/p>\n<\/li>\n<li>\n<p><strong>phone_private<\/strong><br \/>\n(string) Default empty.<\/p>\n<\/li>\n<li>\n<p><strong>phone_work<\/strong><br \/>\n(string) Default empty.<\/p>\n<\/li>\n<li>\n<p><strong>street_and_number<\/strong><br \/>\n(string) Default empty.<\/p>\n<\/li>\n<li>\n<p><strong>zip<\/strong><br \/>\n(string) Default empty.<\/p>\n<\/li>\n<li>\n<p><strong>city<\/strong><br \/>\n(string) Default empty.<\/p>\n<\/li>\n<li>\n<p><strong>country<\/strong><br \/>\n(string) Default empty.<\/p>\n<\/li>\n<li>\n<p><strong>website<\/strong><br \/>\n(string) Default empty.<\/p>\n<\/li>\n<li>\n<p><strong>facebook<\/strong><br \/>\n(string) Default empty.<\/p>\n<\/li>\n<li>\n<p><strong>twitter<\/strong><br \/>\n(string) Default empty.<\/p>\n<\/li>\n<li>\n<p><strong>instagram<\/strong><br \/>\n(string) Default empty.<\/p>\n<\/li>\n<li>\n<p><strong>flickr<\/strong><br \/>\n(string) Default empty.<\/p>\n<\/li>\n<li>\n<p><strong>linkedin<\/strong><br \/>\n(string) Default empty.<\/p>\n<\/li>\n<li>\n<p><strong>xing<\/strong><br \/>\n(string) Default empty.<\/p>\n<\/li>\n<li>\n<p><strong>youtube<\/strong><br \/>\n(string) Default empty.<\/p>\n<\/li>\n<li>\n<p><strong>socialmedia_other1<\/strong><br \/>\n(string) Default empty.<\/p>\n<\/li>\n<li>\n<p><strong>socialmedia_other2<\/strong><br \/>\n(string) Default empty.<\/p>\n<\/li>\n<li>\n<p><strong>socialmedia_other3<\/strong><br \/>\n(string) Default empty.<\/p>\n<\/li>\n<li>\n<p><strong>terms_and_conditions_accepted<\/strong><br \/>\n(string) Default empty.<\/p>\n<ul>\n<li>empty (Not filled)<\/li>\n<li>no (No)<\/li>\n<li>yes (Yes)<\/li>\n<\/ul>\n<\/li>\n<li>\n<p><strong>privacy_policy_accepted<\/strong><br \/>\n(string) Default empty.<\/p>\n<ul>\n<li>empty (Not filled)<\/li>\n<li>no (No)<\/li>\n<li>yes (Yes)<\/li>\n<\/ul>\n<\/li>\n<li>\n<p><strong>contact_group<\/strong><br \/>\n(string) Comma seperated list of contact_group taxonomy terms or ID&#8217;s. Default empty.<\/p>\n<\/li>\n<\/ul>\n<h3>Integrate with Contact Form 7<\/h3>\n<p>Bin Opt-In works best with contact form seven. To integrate it into your contact forms, you need to add custom code like this to your theme functions.php.<\/p>\n<pre>add_action('wpcf7_before_send_mail', 'bin_opt_in_contact');\nfunction bin_opt_in_contact($cf7)\n{\n    \/\/ Get current form id\n    $formId = $cf7-&gt;id;\n\n    \/\/ Array of form ids\n    $forms = [159, 454];\n\n    \/\/ Only apply to certain forms\n    if(in_array($formId, $forms))\n    {\n        \/\/ Dont do anything if class is missing\n        if(class_exists('BinOptIn'))\n        {\n            \/\/ At least, the email must be present\n            if(is_email($_POST['email']))\n            {\n                \/\/ map salutation\n                $salutationMap = [ \n                    'Frau' =&gt; 0,\n                    'Madame' =&gt; 0,\n                    'Mrs' =&gt; 0,\n                    'Herr' =&gt; 1,\n                    'Monsieur' =&gt; 1,\n                    'Mr' =&gt; 1,\n                    '*' =&gt; 2\n                ];\n\n                \/\/ assign form data with corresponding meta fields\n                $postdata = [];\n                $postdata['email'] = sanitize_email($_POST['email']);\n                $postdata['first_name'] = sanitize_text_field($_POST['first_name']);\n                $postdata['last_name'] = sanitize_text_field($_POST['last_name']);\n                $postdata['salutation'] = $salutationMap[$_POST['salutation']];\n                $postdata['terms_and_conditions_accepted'] = isset($_POST['terms_and_conditions_accepted']) ? 'yes' : '';\n\n                \/\/ save contact\n                BinOptIn::optIn($postdata, [\n                    'opt_in_admin_message' =&gt; false,\n                    'double_opt_in' =&gt; false,\n                    'admin_unlock' =&gt; false,\n                    'unlock_message' =&gt; false\n                ]);\n            }\n        }\n    }\n}<\/pre>\n<h3>Integrate with Contact Form 7 Multi-Step Pro<\/h3>\n<p>Save form data at every step by using the filter <em>wpcf7_validate<\/em>.<\/p>\n<pre>\nadd_filter('wpcf7_validate', 'save_contact_step', 10, 2);\nfunction save_contact_step($result, $tags)\n{\n    \/\/ Get current form id\n    $formId = $_POST['_wpcf7'];\n\n    \/\/ Array of form ids\n    $forms = [159, 454];\n\n    \/\/ Only apply to certain forms\n    if(in_array($formId, $forms))\n    {\n        \/\/ Dont do anything if class is missing\n        if(class_exists('BinOptIn'))\n        {\n            \/\/ save contact info here\n            \/\/ BinOptIn::optIn()\n        }\n    }\n\n    return $result;\n}\n<\/pre>\n","screenshots":"<ol><li><a href=\"https:\/\/ps.w.org\/bin-opt-in\/assets\/screenshot-1.png?rev=2181466\"><img src=\"https:\/\/ps.w.org\/bin-opt-in\/assets\/screenshot-1.png?rev=2181466\" alt=\"Backend: Settings page\"><\/a><p>Backend: Settings page<\/p><\/li><\/ol>","reviews":""},"download_link":"https:\/\/downloads.wordpress.org\/plugin\/bin-opt-in.1.2.3.zip","screenshots":{"1":{"src":"https:\/\/ps.w.org\/bin-opt-in\/assets\/screenshot-1.png?rev=2181466","caption":"Backend: Settings page"}},"tags":{"cf7":"cf7","double-opt-in":"double opt in","opt-in":"Opt-in"},"versions":{"1.0.1":"https:\/\/downloads.wordpress.org\/plugin\/bin-opt-in.1.0.1.zip","1.1.0":"https:\/\/downloads.wordpress.org\/plugin\/bin-opt-in.1.1.0.zip","1.2.1":"https:\/\/downloads.wordpress.org\/plugin\/bin-opt-in.1.2.1.zip","1.2.3":"https:\/\/downloads.wordpress.org\/plugin\/bin-opt-in.1.2.3.zip","trunk":"https:\/\/downloads.wordpress.org\/plugin\/bin-opt-in.zip"},"donate_link":"","banners":[]}