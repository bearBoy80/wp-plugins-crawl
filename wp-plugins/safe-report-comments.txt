{"name":"Safe Report Comments","slug":"safe-report-comments","version":"0.4.1","author":"<a href=\"http:\/\/automattic.com\">Thorsten Ott, Daniel Bachhuber, Automattic<\/a>","author_profile":"https:\/\/profiles.wordpress.org\/automattic\/","contributors":{"tott":{"profile":"https:\/\/profiles.wordpress.org\/tott\/","avatar":"https:\/\/secure.gravatar.com\/avatar\/9e8f7fd87fd2163010f98280f3e45a35?s=96&d=monsterid&r=g","display_name":"Thorsten Ott"},"danielbachhuber":{"profile":"https:\/\/profiles.wordpress.org\/danielbachhuber\/","avatar":"https:\/\/secure.gravatar.com\/avatar\/560b284fd021779ea4817470074133f1?s=96&d=monsterid&r=g","display_name":"Daniel Bachhuber"},"automattic":{"profile":"https:\/\/profiles.wordpress.org\/automattic\/","avatar":"https:\/\/secure.gravatar.com\/avatar\/687b3bf96c41800814e3b93766444283?s=96&d=monsterid&r=g","display_name":"Automattic"}},"requires":"3.3","tested":"5.0.20","requires_php":false,"requires_plugins":[],"rating":60,"ratings":{"5":3,"4":0,"3":1,"2":0,"1":3},"num_ratings":7,"support_threads":1,"support_threads_resolved":0,"active_installs":300,"last_updated":"2018-11-30 7:00am GMT","added":"2010-05-14","homepage":"http:\/\/wordpress.org\/extend\/plugins\/safe-report-comments\/","sections":{"description":"<p>This plugin gives your visitors the possibility to report a comment as inappropriate. After a set threshold is reached the comment is put into moderation where the moderator can decide whether or not he want to approve the comment or not. If a comment is approved by a moderator it will not be auto-moderated again while still counting the amount of reports.<\/p>\n<h3>Customizations<\/h3>\n<p>By default this script should hook in just fine in most existing themes as it attaches itsself after the comment-reply link via the comment_reply_link filter.<br \/>\nIn case this does not work out you can place the flagging link manually by defining no_autostart_safe_report_comments in your themes&#8217; functions.php file and initializing the class via <code>$safe_report_comments = new Safe_Report_Comments(false);<\/code>.<\/p>\n<p>Here is an example of a custom setup via functions.php and placing the link comments callback function.<\/p>\n<p>In functions.php:<\/p>\n<pre><code>\/\/flag comments plugin included in themes' functions.php - disable plugin.\ndefine( 'no_autostart_safe_report_comments', true );\ninclude_once( 'replace-with-path-to\/safe-report-comments\/safe-report-comments.php');\n\/\/ make sure not to auto-attach to comment reply link\n$safe_report_comments = new Safe_Report_Comments(false);\n\n\/\/ change link layout to have a pipe prepended\nadd_filter( 'safe_report_comments_flagging_link', 'adjust_flagging_link' );\nfunction adjust_flagging_link( $link ) {\n    return ' | ' . $link;\n}\n\n\/\/ adjust the text to \"Report abuse\" rather than \"Report comment\"\nadd_filter( 'safe_report_comments_flagging_link_text', 'adjust_flagging_text' );\nfunction adjust_flagging_text( $text ) {\n    return 'Report abuse';\n}\n<\/code><\/pre>\n<p>In your custom comment callback function used by wp_list_comments: https:\/\/codex.wordpress.org\/Template_Tags\/wp_list_comments place the following action which will print the link.<\/p>\n<pre><code>&lt;?php do_action( 'comment_report_abuse_link' ); ?&gt; \n<\/code><\/pre>\n<p>A possible callback function could look like this:<\/p>\n<pre><code>function mytheme_comment($comment, $args, $depth) {\n    $GLOBALS['comment'] = $comment; ?&gt;\n    &lt;li &lt;?php comment_class(); ?&gt; id=\"li-comment-&lt;?php comment_ID() ?&gt;\"&gt;\n        &lt;div id=\"comment-&lt;?php comment_ID(); ?&gt;\"&gt;\n            &lt;div class=\"comment-author vcard\"&gt;\n                &lt;?php echo get_avatar($comment,$size='48',$default='&lt;path_to_url&gt;' ); ?&gt;\n                &lt;?php printf(__('&lt;cite class=\"fn\"&gt;%s&lt;\/cite&gt; &lt;span class=\"says\"&gt;says:&lt;\/span&gt;'), get_comment_author_link()) ?&gt;\n            &lt;\/div&gt;\n            &lt;?php if ($comment-&gt;comment_approved == '0') : ?&gt;\n            &lt;em&gt;&lt;?php _e('Your comment is awaiting moderation.') ?&gt;&lt;\/em&gt;\n            &lt;br \/&gt;\n        &lt;?php endif; ?&gt;\n        &lt;div class=\"comment-meta commentmetadata\"&gt;&lt;a href=\"&lt;?php echo htmlspecialchars( get_comment_link( $comment-&gt;comment_ID ) ) ?&gt;\"&gt;&lt;?php printf(__('%1$s at %2$s'), get_comment_date(),  get_comment_time()) ?&gt;&lt;\/a&gt;&lt;?php edit_comment_link(__('(Edit)'),'    ','') ?&gt;&lt;\/div&gt;\n\n        &lt;?php comment_text() ?&gt;\n\n        &lt;div class=\"reply\"&gt;\n            &lt;?php comment_reply_link(array_merge( $args, array('depth' =&gt; $depth, 'max_depth' =&gt; $args['max_depth']))) ?&gt;\n        &lt;\/div&gt;\n        &lt;div class=\"report-abuse\"&gt;\n            &lt;?php do_action( 'comment_report_abuse_link' ); ?&gt;\n        &lt;\/div&gt;\n    &lt;\/div&gt;\n    &lt;?php\n}\n<\/code><\/pre>\n<p>Furthermore there are various actions and filters within the script to allow easy alteration of implemented behavior. Please see inline documentation.<\/p>\n<h3>Known issues<\/h3>\n<p>Automatic mode implementation currently does not work with threaded comments in the last level of threading. As the script attaches itself to the comment_reply which is not displayed once the maximum threading level is reached the abuse link is missing at this point. As a workaround set the threading level higher than the likely amount of threading depth.<\/p>\n","installation":"<ol>\n<li>Download and unzip the plugin.<\/li>\n<li>Copy the safe-report-comments directory into your plugins folder.<\/li>\n<li>Visit your Plugins page and activate the plugin.<\/li>\n<li>A new checkbox called &#8220;Allow comment flagging&#8221; will appear in the Settings-&gt;Discussion page.<\/li>\n<li>Activate the flag and set the threshold value which will appear on the same page after activation<\/li>\n<\/ol>\n","changelog":"<h4>0.4.1 (July 23, 2014)<\/h4>\n<ul>\n<li>Typo fix, props spencermorin<\/li>\n<\/ul>\n<h4>0.4 (July 23, 2014)<\/h4>\n<ul>\n<li>Security fix, h\/t vortfu<\/li>\n<\/ul>\n<h4>0.3.2 (Mar. 6, 2013)<\/h4>\n<ul>\n<li>New &#8216;safe_report_comments_allow_moderated_to_be_reflagged&#8217; filter allows comments to be reflagged after being moderated.<\/li>\n<\/ul>\n<h4>0.3.1 (Nov. 21, 2012)<\/h4>\n<ul>\n<li>Use home_url() for generating the ajaxurl on mapped domains, but admin_url() where the domain isn&#8217;t mapped.<\/li>\n<\/ul>\n<h4>0.3 (Nov. 7, 2012)<\/h4>\n<ul>\n<li>Coding standards and cleanup<\/li>\n<\/ul>\n","screenshots":"<ol><li><a href=\"https:\/\/ps.w.org\/safe-report-comments\/trunk\/screenshot-1.png?rev=1983035\"><img src=\"https:\/\/ps.w.org\/safe-report-comments\/trunk\/screenshot-1.png?rev=1983035\" alt=\"Simple activation via discussion settings\"><\/a><p>Simple activation via discussion settings<\/p><\/li><li><a href=\"https:\/\/ps.w.org\/safe-report-comments\/trunk\/screenshot-2.png?rev=1983035\"><img src=\"https:\/\/ps.w.org\/safe-report-comments\/trunk\/screenshot-2.png?rev=1983035\" alt=\"Amount of reports per comment is shown in comments administration screen\"><\/a><p>Amount of reports per comment is shown in comments administration screen<\/p><\/li><li><a href=\"https:\/\/ps.w.org\/safe-report-comments\/trunk\/screenshot-3.png?rev=1983035\"><img src=\"https:\/\/ps.w.org\/safe-report-comments\/trunk\/screenshot-3.png?rev=1983035\" alt=\"Fits well within most themes without any further action.\"><\/a><p>Fits well within most themes without any further action.<\/p><\/li><li><a href=\"https:\/\/ps.w.org\/safe-report-comments\/trunk\/screenshot-4.png?rev=1983035\"><img src=\"https:\/\/ps.w.org\/safe-report-comments\/trunk\/screenshot-4.png?rev=1983035\" alt=\"Ajax feedback right in place where available.\"><\/a><p>Ajax feedback right in place where available.<\/p><\/li><\/ol>","reviews":"<div class=\"review\">\n\t<div class=\"review-head\">\n\t\t<div class=\"reviewer-info\">\n\t\t\t<div class=\"review-title-section\">\n\t\t\t\t<h4 class=\"review-title\">Please update the plugin<\/h4>\n\t\t\t\t<div class=\"star-rating\">\n\t\t\t\t<div class=\"wporg-ratings\" aria-label=\"1 out of 5 stars\" data-title-template=\"%s out of 5 stars\" data-rating=\"1\" style=\"color:#ffb900;\"><span class=\"star dashicons dashicons-star-filled\"><\/span><span class=\"star dashicons dashicons-star-empty\"><\/span><span class=\"star dashicons dashicons-star-empty\"><\/span><span class=\"star dashicons dashicons-star-empty\"><\/span><span class=\"star dashicons dashicons-star-empty\"><\/span><\/div>\t\t\t\t<\/div>\n\t\t\t<\/div>\n\t\t\t<p class=\"reviewer\">\n\t\t\t\tBy <a href=\"https:\/\/profiles.wordpress.org\/conleywilliam32\/\"><img alt='' src='https:\/\/secure.gravatar.com\/avatar\/0badcbb47d9114569d48ebc040d5ce39?s=16&#038;d=monsterid&#038;r=g' srcset='https:\/\/secure.gravatar.com\/avatar\/0badcbb47d9114569d48ebc040d5ce39?s=32&#038;d=monsterid&#038;r=g 2x' class='avatar avatar-16 photo' height='16' width='16' loading='lazy' decoding='async'\/><\/a><a href=\"https:\/\/profiles.wordpress.org\/conleywilliam32\/\" class=\"reviewer-name\">conleywilliam32<\/a> on <span class=\"review-date\">May 16, 2018<\/span>\t\t\t<\/p>\n\t\t<\/div>\n\t<\/div>\n\t<div class=\"review-body\">Hi\n\nGosh, I not able to make it work at all. If you are not contributing to this plugin. Mention it on the plugin page!\n\n<\/div>\n<\/div>\n<div class=\"review\">\n\t<div class=\"review-head\">\n\t\t<div class=\"reviewer-info\">\n\t\t\t<div class=\"review-title-section\">\n\t\t\t\t<h4 class=\"review-title\">Doesn&#039;t work<\/h4>\n\t\t\t\t<div class=\"star-rating\">\n\t\t\t\t<div class=\"wporg-ratings\" aria-label=\"1 out of 5 stars\" data-title-template=\"%s out of 5 stars\" data-rating=\"1\" style=\"color:#ffb900;\"><span class=\"star dashicons dashicons-star-filled\"><\/span><span class=\"star dashicons dashicons-star-empty\"><\/span><span class=\"star dashicons dashicons-star-empty\"><\/span><span class=\"star dashicons dashicons-star-empty\"><\/span><span class=\"star dashicons dashicons-star-empty\"><\/span><\/div>\t\t\t\t<\/div>\n\t\t\t<\/div>\n\t\t\t<p class=\"reviewer\">\n\t\t\t\tBy <a href=\"https:\/\/profiles.wordpress.org\/tneveu\/\"><img alt='' src='https:\/\/secure.gravatar.com\/avatar\/819dd8360f39efe371d619ae6eca888d?s=16&#038;d=monsterid&#038;r=g' srcset='https:\/\/secure.gravatar.com\/avatar\/819dd8360f39efe371d619ae6eca888d?s=32&#038;d=monsterid&#038;r=g 2x' class='avatar avatar-16 photo' height='16' width='16' loading='lazy' decoding='async'\/><\/a><a href=\"https:\/\/profiles.wordpress.org\/tneveu\/\" class=\"reviewer-name\">Boston Tom <small>(tneveu)<\/small><\/a> on <span class=\"review-date\">September 3, 2016<\/span>\t\t\t<\/p>\n\t\t<\/div>\n\t<\/div>\n\t<div class=\"review-body\"><p>It may work with the lousy WordPress templates you get for free when you install WordPress, but since most people use third-party templates, this falls short. After installing and turning it on, doing the settings, it simply wouldn't show up on the front-end. I looked at the page's source code, and the js and what-not was there just not anyway to flag the comment. I\"ve tried a lot of plugins that purport to do this, and they all fail except for Frontend Comment Moderation. That works but it doesn't send an email to notify you a comment has been flagged. Sigh.\n<\/p>\n<\/div>\n<\/div>\n<div class=\"review\">\n\t<div class=\"review-head\">\n\t\t<div class=\"reviewer-info\">\n\t\t\t<div class=\"review-title-section\">\n\t\t\t\t<h4 class=\"review-title\">Very good plugin but the position is bad<\/h4>\n\t\t\t\t<div class=\"star-rating\">\n\t\t\t\t<div class=\"wporg-ratings\" aria-label=\"5 out of 5 stars\" data-title-template=\"%s out of 5 stars\" data-rating=\"5\" style=\"color:#ffb900;\"><span class=\"star dashicons dashicons-star-filled\"><\/span><span class=\"star dashicons dashicons-star-filled\"><\/span><span class=\"star dashicons dashicons-star-filled\"><\/span><span class=\"star dashicons dashicons-star-filled\"><\/span><span class=\"star dashicons dashicons-star-filled\"><\/span><\/div>\t\t\t\t<\/div>\n\t\t\t<\/div>\n\t\t\t<p class=\"reviewer\">\n\t\t\t\tBy <a href=\"https:\/\/profiles.wordpress.org\/forforce\/\"><img alt='' src='https:\/\/secure.gravatar.com\/avatar\/5c7afb1f416ee2dd7722629da31eafd1?s=16&#038;d=monsterid&#038;r=g' srcset='https:\/\/secure.gravatar.com\/avatar\/5c7afb1f416ee2dd7722629da31eafd1?s=32&#038;d=monsterid&#038;r=g 2x' class='avatar avatar-16 photo' height='16' width='16' loading='lazy' decoding='async'\/><\/a><a href=\"https:\/\/profiles.wordpress.org\/forforce\/\" class=\"reviewer-name\">forforce<\/a> on <span class=\"review-date\">February 8, 2017<\/span>\t\t\t<\/p>\n\t\t<\/div>\n\t<\/div>\n\t<div class=\"review-body\"><p>I need this plugin but I want to change the position so I can use it. I still want it to be on the same line with the reply button but to be in the right side, not near the Reply button. Can you help me with this ? Thank you.\n<\/p>\n<\/div>\n<\/div>\n"},"download_link":"https:\/\/downloads.wordpress.org\/plugin\/safe-report-comments.0.4.1.zip","screenshots":{"1":{"src":"https:\/\/ps.w.org\/safe-report-comments\/trunk\/screenshot-1.png?rev=1983035","caption":"Simple activation via discussion settings"},"2":{"src":"https:\/\/ps.w.org\/safe-report-comments\/trunk\/screenshot-2.png?rev=1983035","caption":"Amount of reports per comment is shown in comments administration screen"},"3":{"src":"https:\/\/ps.w.org\/safe-report-comments\/trunk\/screenshot-3.png?rev=1983035","caption":"Fits well within most themes without any further action."},"4":{"src":"https:\/\/ps.w.org\/safe-report-comments\/trunk\/screenshot-4.png?rev=1983035","caption":"Ajax feedback right in place where available."}},"tags":{"comments":"comments","flag":"flag","flagging":"flagging","report":"report","report-comments":"report comments"},"versions":{"0.3":"https:\/\/downloads.wordpress.org\/plugin\/safe-report-comments.0.3.zip","0.3.1":"https:\/\/downloads.wordpress.org\/plugin\/safe-report-comments.0.3.1.zip","0.3.2":"https:\/\/downloads.wordpress.org\/plugin\/safe-report-comments.0.3.2.zip","0.4":"https:\/\/downloads.wordpress.org\/plugin\/safe-report-comments.0.4.zip","0.4.1":"https:\/\/downloads.wordpress.org\/plugin\/safe-report-comments.0.4.1.zip","trunk":"https:\/\/downloads.wordpress.org\/plugin\/safe-report-comments.zip"},"donate_link":"","banners":[]}