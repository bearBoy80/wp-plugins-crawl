{"name":"nginx Compatibility","slug":"nginx-compatibility","version":"0.2.5","author":"<a href=\"http:\/\/blog.sjinks.pro\/\">Vladimir Kolesnikov<\/a>","author_profile":"https:\/\/profiles.wordpress.org\/vladimir_kolesnikov\/","contributors":{"vladimir_kolesnikov":{"profile":"https:\/\/profiles.wordpress.org\/vladimir_kolesnikov\/","avatar":"https:\/\/secure.gravatar.com\/avatar\/605589d602f73c503b62d85b010f35b4?s=96&d=monsterid&r=g","display_name":"Vladimir Kolesnikov"}},"requires":"2.5","tested":"3.2.1","requires_php":false,"requires_plugins":[],"rating":74,"ratings":{"5":2,"4":0,"3":0,"2":0,"1":1},"num_ratings":3,"support_threads":0,"support_threads_resolved":0,"active_installs":100,"last_updated":"2011-07-04 5:25pm GMT","added":"2009-04-15","homepage":"http:\/\/blog.sjinks.pro\/wordpress-plugins\/nginx-compatibility\/","sections":{"description":"<p>The plugin solves two problems:<\/p>\n<ol>\n<li>When WordPress detects that FastCGI PHP SAPI is in use, it<br \/>\n<a href=\"http:\/\/blog.sjinks.pro\/wordpress\/510-wordpress-fastcgi-and-301-redirect\/\" rel=\"nofollow ugc\">disregards the redirect status code<\/a><br \/>\npassed to <code>wp_redirect<\/code>. Thus, all 301 redrects become 302 redirects<br \/>\nwhich may not be good for SEO. The plugin overrides <code>wp_redirect<\/code> when it detects<br \/>\nthat nginx is used.<\/li>\n<li>When WordPress detects that <code>mod_rewrite<\/code> is not loaded (which is the case for nginx as<br \/>\nit does not load any Apache modules) it falls back to <a href=\"https:\/\/codex.wordpress.org\/Using_Permalinks#PATHINFO:_.22Almost_Pretty.22\" rel=\"nofollow ugc\">PATHINFO permalinks<\/a><br \/>\nin Permalink Settings page. nginx itself has built-in support for URL rewriting and does not need<br \/>\nPATHINFO permalinks. Thus, when the plugin detects that nginx is used, it makes WordPress think<br \/>\nthat <code>mod_rewrite<\/code> is loaded and it is OK to use pretty permalinks.<\/li>\n<\/ol>\n<p>The plugin does not require any configuration. It just does its work.<br \/>\nYou won&#8217;t notice it \u2014 install and forget.<\/p>\n<p><strong>WARNING:<\/strong> nginx must be configured properly to support permalinks.<\/p>\n<h3>nginx Configuration<\/h3>\n<p><strong>nginx 0.7.32 and higher:<\/strong><\/p>\n<pre><code>server {\n    server_name mysite.com;\n\n    root \/path\/to\/blog;\n\n    index index.php;\n\n    error_page 404 = @wordpress;\n    log_not_found off;\n\n    location ^~ \/files\/ {\n        rewrite \/files\/(.+) \/wp-includes\/ms-files.php?file=$1 last;\n    }\n\n    location @wordpress {\n        fastcgi_pass ...;\n        fastcgi_param SCRIPT_FILENAME $document_root\/index.php;\n        include \/etc\/nginx\/fastcgi_params;\n        fastcgi_param SCRIPT_NAME \/index.php;\n    }\n\n    location ~ \\.php$ {\n        try_files $uri @wordpress;\n        fastcgi_index index.php;\n        fastcgi_pass ...;\n        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\n        include \/etc\/nginx\/fastcgi_params;\n    }\n\n    location ^~ \/blogs.dir\/ {\n        internal;\n        root \/path\/to\/blog\/wp-content;\n    }\n}\n<\/code><\/pre>\n<p><strong>Older versions:<\/strong><\/p>\n<pre><code>server {\n    server_name mysite.com;\n\n    root \/path\/to\/blog;\n\n    index index.php;\n\n    log_not_found off;\n    error_page 404 = @wordpress;\n\n    location ^~ \/files\/ {\n        rewrite \/files\/(.+) \/wp-includes\/ms-files.php?file=$1 last;\n    }\n\n    location @wordpress {\n        fastcgi_pass ...;\n        fastcgi_param SCRIPT_FILENAME $document_root\/index.php;\n        include \/etc\/nginx\/fastcgi_params;\n        fastcgi_param SCRIPT_NAME \/index.php;\n    }\n\n    location ~ \\.php$ {\n        if (!-e $request_filename) {\n            rewrite ^(.+)$ \/index.php break;\n            break;\n        }\n\n        fastcgi_index index.php;\n        fastcgi_pass ...;\n        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\n        include \/etc\/nginx\/fastcgi_params;\n    }\n\n    location ^~ \/blogs.dir\/ {\n        internal;\n        root \/path\/to\/blog\/wp-content;\n    }\n}\n<\/code><\/pre>\n<p>Of course, do not forget to replace <code>...<\/code> in <code>fastcgi_pass<\/code> with the address\/socket<br \/>\nphp-cgi is listening on and replace \/path\/to\/blog with the actual path.<\/p>\n<p>Also please note that the path in <code>SCRIPT_NAME<\/code> should be relative to the <code>DOCUMENT_ROOT<\/code> (<code>root<\/code> directive).<br \/>\nThus, if your WordPress blog resides in <code>http:\/\/example.com\/blog\/<\/code>, <code>root<\/code> is set to <code>\/path.to\/example.com<\/code>,<br \/>\n    SCRIPT_NAME in <code>location @wordpress<\/code> will be <code>\/blog\/index.php<\/code>.<\/p>\n<p><strong><a href=\"http:\/\/blog.sjinks.pro\/wordpress\/874-wpms-nginx-accel-redirect\/\" rel=\"nofollow ugc\">Multi-Site Configuration<\/a>:<\/strong> the above configs work perfectly with WordPress MultiSite. To make downloads faster, consider adding this line to <code>wp-config.php<\/code>:<\/p>\n<pre><code>define('WPMU_ACCEL_REDIRECT', true);\n<\/code><\/pre>\n<p><strong>Need help with configuring nginx?<\/strong> Contact me: vkolesnikov at odesk dot com, I will try to help you.<\/p>\n","installation":"<ol>\n<li>Upload <code>nginx-compatibility<\/code> folder to the <code>\/wp-content\/plugins\/<\/code> directory.<\/li>\n<li>Activate the plugin through the &#8216;Plugins&#8217; menu in WordPress. The plugins comes in two flavors: PHP4 (experimental) and PHP5. Please activate<br \/>\nthe flavor that matches your PHP version.<\/li>\n<li>That&#8217;s all \ud83d\ude42<\/li>\n<\/ol>\n","faq":"<p>None yet. Be the first to ask.<\/p>\n","changelog":"<h4>0.2.5<\/h4>\n<ul>\n<li>Added code to prevent path disclosure<\/li>\n<\/ul>\n<h4>0.2.4<\/h4>\n<ul>\n<li>Updated nginx Configuration section to reflect the changes necessary for WordPress 3.0+<\/li>\n<\/ul>\n<h4>0.2.3<\/h4>\n<ul>\n<li>Detects nginx when <code>server_tokens<\/code> is off (props Serge Pokhodyaev)<\/li>\n<\/ul>\n<h4>0.2.2<\/h4>\n<ul>\n<li>Better HTTPS handling<\/li>\n<li>Updated &#8220;nginx Configuration&#8221; section<\/li>\n<li>Fixed a bug with multiple calls to <code>wp_redirect()<\/code> (props KeRNel_x86)<\/li>\n<\/ul>\n<h4>0.2.1<\/h4>\n<ul>\n<li>Code refactoring using <a href=\"http:\/\/blog.sjinks.pro\/php\/651-php-code-beauty-impacts-performance-part-2\/\" title=\"PHP Code Beauty Impacts Performance\" rel=\"nofollow ugc\">PHP code optimization methods<\/a><\/li>\n<li>Supported WP versions: 2.5-2.9<\/li>\n<\/ul>\n<h4>0.2<\/h4>\n<ul>\n<li>Added experimental PHP4-compatble version of the plugin<\/li>\n<\/ul>\n<h4>0.1.1<\/h4>\n<ul>\n<li>Added status code check to <code>wp_redirect<\/code><\/li>\n<\/ul>\n<h4>0.1<\/h4>\n<ul>\n<li>First public release<\/li>\n<\/ul>\n","reviews":"<div class=\"review\">\n\t<div class=\"review-head\">\n\t\t<div class=\"reviewer-info\">\n\t\t\t<div class=\"review-title-section\">\n\t\t\t\t<h4 class=\"review-title\">Superseded by Nginx Helper plugin<\/h4>\n\t\t\t\t<div class=\"star-rating\">\n\t\t\t\t<div class=\"wporg-ratings\" aria-label=\"1 out of 5 stars\" data-title-template=\"%s out of 5 stars\" data-rating=\"1\" style=\"color:#ffb900;\"><span class=\"star dashicons dashicons-star-filled\"><\/span><span class=\"star dashicons dashicons-star-empty\"><\/span><span class=\"star dashicons dashicons-star-empty\"><\/span><span class=\"star dashicons dashicons-star-empty\"><\/span><span class=\"star dashicons dashicons-star-empty\"><\/span><\/div>\t\t\t\t<\/div>\n\t\t\t<\/div>\n\t\t\t<p class=\"reviewer\">\n\t\t\t\tBy <a href=\"https:\/\/profiles.wordpress.org\/chatmandesign\/\"><img alt='' src='https:\/\/secure.gravatar.com\/avatar\/c81d93611a3a9601575a1ae5de079ce0?s=16&#038;d=monsterid&#038;r=g' srcset='https:\/\/secure.gravatar.com\/avatar\/c81d93611a3a9601575a1ae5de079ce0?s=32&#038;d=monsterid&#038;r=g 2x' class='avatar avatar-16 photo' height='16' width='16' loading='lazy' decoding='async'\/><\/a><a href=\"https:\/\/profiles.wordpress.org\/chatmandesign\/\" class=\"reviewer-name\">chatmandesign<\/a> on <span class=\"review-date\">December 7, 2016<\/span>\t\t\t<\/p>\n\t\t<\/div>\n\t<\/div>\n\t<div class=\"review-body\">Note: This plugin no longer appears to be maintained. I believe it has been superseded by Nginx Helper, which appears to provide additional functionality, be maintained, and is recommended in the official WordPress Codex.\n\nhttps:\/\/wordpress.org\/plugins\/nginx-helper\/<\/div>\n<\/div>\n<div class=\"review\">\n\t<div class=\"review-head\">\n\t\t<div class=\"reviewer-info\">\n\t\t\t<div class=\"review-title-section\">\n\t\t\t\t<h4 class=\"review-title\">Thank you<\/h4>\n\t\t\t\t<div class=\"star-rating\">\n\t\t\t\t<div class=\"wporg-ratings\" aria-label=\"5 out of 5 stars\" data-title-template=\"%s out of 5 stars\" data-rating=\"5\" style=\"color:#ffb900;\"><span class=\"star dashicons dashicons-star-filled\"><\/span><span class=\"star dashicons dashicons-star-filled\"><\/span><span class=\"star dashicons dashicons-star-filled\"><\/span><span class=\"star dashicons dashicons-star-filled\"><\/span><span class=\"star dashicons dashicons-star-filled\"><\/span><\/div>\t\t\t\t<\/div>\n\t\t\t<\/div>\n\t\t\t<p class=\"reviewer\">\n\t\t\t\tBy <a href=\"https:\/\/profiles.wordpress.org\/televizor\/\"><img alt='' src='https:\/\/secure.gravatar.com\/avatar\/79bc911c2bb9a2eb985cd147445700e5?s=16&#038;d=monsterid&#038;r=g' srcset='https:\/\/secure.gravatar.com\/avatar\/79bc911c2bb9a2eb985cd147445700e5?s=32&#038;d=monsterid&#038;r=g 2x' class='avatar avatar-16 photo' height='16' width='16' loading='lazy' decoding='async'\/><\/a><a href=\"https:\/\/profiles.wordpress.org\/televizor\/\" class=\"reviewer-name\">televizor<\/a> on <span class=\"review-date\">February 8, 2017<\/span>\t\t\t<\/p>\n\t\t<\/div>\n\t<\/div>\n\t<div class=\"review-body\"><p>Good work.\n<\/p>\n<\/div>\n<\/div>\n"},"download_link":"https:\/\/downloads.wordpress.org\/plugin\/nginx-compatibility.0.2.5.zip","screenshots":[],"tags":{"fastcgi":"fastcgi","nginx":"nginx","pretty-permalinks":"pretty permalinks"},"versions":{"0.1":"https:\/\/downloads.wordpress.org\/plugin\/nginx-compatibility.0.1.zip","0.1.1":"https:\/\/downloads.wordpress.org\/plugin\/nginx-compatibility.0.1.1.zip","0.2":"https:\/\/downloads.wordpress.org\/plugin\/nginx-compatibility.0.2.zip","0.2.1":"https:\/\/downloads.wordpress.org\/plugin\/nginx-compatibility.0.2.1.zip","0.2.2":"https:\/\/downloads.wordpress.org\/plugin\/nginx-compatibility.0.2.2.zip","0.2.3":"https:\/\/downloads.wordpress.org\/plugin\/nginx-compatibility.0.2.3.zip","0.2.4":"https:\/\/downloads.wordpress.org\/plugin\/nginx-compatibility.0.2.4.zip","0.2.5":"https:\/\/downloads.wordpress.org\/plugin\/nginx-compatibility.0.2.5.zip","trunk":"https:\/\/downloads.wordpress.org\/plugin\/nginx-compatibility.zip"},"donate_link":"http:\/\/blog.sjinks.pro\/feedback\/","banners":[]}