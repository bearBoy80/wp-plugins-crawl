{"name":"Hagakure &#8211; Yet Another Error Reporter","slug":"hagakure","version":"1.2.0","author":"<a href=\"https:\/\/kunoichiwp.com\">Kunoichi<\/a>","author_profile":"https:\/\/profiles.wordpress.org\/takahashi_fumiki\/","contributors":{"kuno1":{"profile":"https:\/\/profiles.wordpress.org\/kuno1\/","avatar":"https:\/\/secure.gravatar.com\/avatar\/d459e8eedf7aef2cbe7f993374913d75?s=96&d=monsterid&r=g","display_name":"Kunoichi INC"},"takahashi_fumiki":{"profile":"https:\/\/profiles.wordpress.org\/takahashi_fumiki\/","avatar":"https:\/\/secure.gravatar.com\/avatar\/e2340d831c2606e3b36661750ce0fd2c?s=96&d=monsterid&r=g","display_name":"Takahashi Fumiki"}},"requires":"5.8","tested":"6.1.4","requires_php":"7.0","requires_plugins":[],"rating":100,"ratings":{"5":2,"4":0,"3":0,"2":0,"1":0},"num_ratings":2,"support_threads":0,"support_threads_resolved":0,"active_installs":10,"last_updated":"2022-11-29 11:17am GMT","added":"2019-05-10","homepage":"","sections":{"description":"<p>Have you ever seen an error log like the one below?<\/p>\n<blockquote>\n<p>PHP Fatal error: Allowed memory size of xxxxxx bytes exhausted (tried to allocate xxx bytes) in \/var\/www\/wordpress\/wp-includes\/wp-db.php on line 2007<\/p>\n<\/blockquote>\n<p>This means that <a href=\"https:\/\/www.php.net\/manual\/en\/ini.core.php#ini.memory-limit\" rel=\"nofollow ugc\">PHP memory limit<\/a> is exhausted while retrieving data from a database. In any case, this happens when your site has big data and makes insane loops inside.<\/p>\n<p>But we want to know that <strong>which plugin tried to retrieve data?<\/strong><\/p>\n<p>Hagakure adds extra information to error.log file when <code>wp-db.php<\/code> causes memory limit error:<\/p>\n<pre>[08-May-2019 10:28:37 UTC] wpdb Error Backtrace:\n#1      Kunoichi\\Hagakure\\DbLogger-&gt;filter_query()      \/app\/public\/wp-includes\/class-wp-hook.php       Line 286\n#2      WP_Hook-&gt;apply_filters()        \/app\/public\/wp-includes\/plugin.php      Line 208\n#3      apply_filters   \/app\/public\/wp-includes\/wp-db.php       Line 1871\n#4      wpdb-&gt;query()   \/app\/public\/wp-includes\/wp-db.php       Line 2579\n#5      wpdb-&gt;get_results()     \/app\/public\/wp-includes\/class-wp-query.php      Line 2979\n#6      WP_Query-&gt;get_posts()   \/app\/public\/wp-includes\/class-wp-query.php      Line 3387\n#7      WP_Query-&gt;query()       \/app\/public\/wp-includes\/post.php        Line 1961\n#8      get_posts       \/app\/public\/wp-content\/plugins\/hagakure\/hagakure.php    Line 34\n#9      {closure}       \/app\/public\/wp-includes\/class-wp-hook.php       Line 286\n#10     WP_Hook-&gt;apply_filters()        \/app\/public\/wp-includes\/class-wp-hook.php       Line 310\n#11     WP_Hook-&gt;do_action()    \/app\/public\/wp-includes\/plugin.php      Line 465\n#12     do_action       \/app\/public\/wp-includes\/template-loader.php     Line 13\n#13     require_once    \/app\/public\/wp-blog-header.php  Line 19\n#14     require \/app\/public\/index.php   Line 17<\/pre>\n<p>This log will always follow the memory limit Fatal Error by <code>wp-db.php<\/code>. Now you can find <code>#8<\/code> calls <code>get_posts<\/code> repeatedly.<\/p>\n<p>We recommend watching logs with notification services like <a href=\"https:\/\/docs.aws.amazon.com\/AmazonCloudWatch\/latest\/logs\/WhatIsCloudWatchLogs.html\" rel=\"nofollow ugc\">CloudWatch Logs<\/a>.<br \/>\nThis error occurs in the productional environment, and you may not have a chance to see it occurs.<br \/>\nWe use Hagakure with our <a href=\"https:\/\/hosting.kunoichiwp.com\/\" rel=\"nofollow ugc\">hosting service<\/a>, please look forward to seeing <a href=\"https:\/\/kunoichiwp.com\/blog\" rel=\"nofollow ugc\">our blog published<\/a> and describing the integration!<\/p>\n<p>This plugin also adds debug backtrace to error logs. To modify the error level to a detailed backtrace, define the constant:<\/p>\n<pre>define( 'HAGAKURE_ERROR_LEVEL', E_NOTICE | E_USER_WARNING | E_WARNING | E_USER_ERROR );<\/pre>\n<p>Besides that, if <code>SAVEQUERIES<\/code> is set <code>true<\/code>, the slow query log will be logged with PHP debug backtrace. This helps you to debug.<\/p>\n<h3>Acknowledgements<\/h3>\n<p>The base text for dummy content is &#8220;Three Ghost Story&#8221; by Charles Dickens. The text file is modified the one of <a href=\"https:\/\/www.gutenberg.org\/ebooks\/1289\" rel=\"nofollow ugc\">Project Gutenberg<\/a>.<\/p>\n","installation":"<ol>\n<li>Upload <code>hagakure<\/code> folder to the <code>\/wp-content\/plugins<\/code> directory.<\/li>\n<li>Activate the plugin through the &#8216;Plugins&#8217; menu in WordPress.<\/li>\n<li>That&#8217;s it. This plugin will work as background.<\/li>\n<\/ol>\n","faq":"\n<dt id='how%20can%20i%20contribute%3F'>\nHow can I contribute?\n<\/h4>\n<p>\n<p>We host this plugin on GitHub <a href=\"https:\/\/github.com\/kuno1\/hagakure\" rel=\"nofollow ugc\">kuno1\/hagakure<\/a>. Please feel free to send <a href=\"https:\/\/github.com\/kuno1\/hagakure\/pulls\" rel=\"nofollow ugc\">PRs<\/a> or to make <a href=\"https:\/\/github.com\/kuno1\/hagakure\/issues\" rel=\"nofollow ugc\">issues<\/a>.<\/p>\n<\/p>\n\n","changelog":"<h4>1.2.0<\/h4>\n<ul>\n<li>Slow query can be logged with the backtraces.<\/li>\n<\/ul>\n<h4>1.1.0<\/h4>\n<ul>\n<li>Add Request URI to backtrace.<\/li>\n<\/ul>\n<h4>1.0.0<\/h4>\n<ul>\n<li>Add warning and notice detail handler.<\/li>\n<\/ul>\n<h4>0.8.0<\/h4>\n<ul>\n<li>First Release.<\/li>\n<\/ul>\n","reviews":"<div class=\"review\">\n\t<div class=\"review-head\">\n\t\t<div class=\"reviewer-info\">\n\t\t\t<div class=\"review-title-section\">\n\t\t\t\t<h4 class=\"review-title\">Great<\/h4>\n\t\t\t\t<div class=\"star-rating\">\n\t\t\t\t<div class=\"wporg-ratings\" aria-label=\"5 out of 5 stars\" data-title-template=\"%s out of 5 stars\" data-rating=\"5\" style=\"color:#ffb900;\"><span class=\"star dashicons dashicons-star-filled\"><\/span><span class=\"star dashicons dashicons-star-filled\"><\/span><span class=\"star dashicons dashicons-star-filled\"><\/span><span class=\"star dashicons dashicons-star-filled\"><\/span><span class=\"star dashicons dashicons-star-filled\"><\/span><\/div>\t\t\t\t<\/div>\n\t\t\t<\/div>\n\t\t\t<p class=\"reviewer\">\n\t\t\t\tBy <a href=\"https:\/\/profiles.wordpress.org\/horike\/\"><img alt='' src='https:\/\/secure.gravatar.com\/avatar\/53c9bf20050e5457f054eac61c388a15?s=16&#038;d=monsterid&#038;r=g' srcset='https:\/\/secure.gravatar.com\/avatar\/53c9bf20050e5457f054eac61c388a15?s=32&#038;d=monsterid&#038;r=g 2x' class='avatar avatar-16 photo' height='16' width='16' loading='lazy' decoding='async'\/><\/a><a href=\"https:\/\/profiles.wordpress.org\/horike\/\" class=\"reviewer-name\">horike<\/a> on <span class=\"review-date\">May 10, 2019<\/span>\t\t\t<\/p>\n\t\t<\/div>\n\t<\/div>\n\t<div class=\"review-body\">This plugin makes it easy to find the root cause of <code>PHP Fatal error: Allowed memory size of xxxxxx bytes exhausted<\/code> error. AWESOME.\n<\/div>\n<\/div>\n<div class=\"review\">\n\t<div class=\"review-head\">\n\t\t<div class=\"reviewer-info\">\n\t\t\t<div class=\"review-title-section\">\n\t\t\t\t<h4 class=\"review-title\">Looks good<\/h4>\n\t\t\t\t<div class=\"star-rating\">\n\t\t\t\t<div class=\"wporg-ratings\" aria-label=\"5 out of 5 stars\" data-title-template=\"%s out of 5 stars\" data-rating=\"5\" style=\"color:#ffb900;\"><span class=\"star dashicons dashicons-star-filled\"><\/span><span class=\"star dashicons dashicons-star-filled\"><\/span><span class=\"star dashicons dashicons-star-filled\"><\/span><span class=\"star dashicons dashicons-star-filled\"><\/span><span class=\"star dashicons dashicons-star-filled\"><\/span><\/div>\t\t\t\t<\/div>\n\t\t\t<\/div>\n\t\t\t<p class=\"reviewer\">\n\t\t\t\tBy <a href=\"https:\/\/profiles.wordpress.org\/miyauchi\/\"><img alt='' src='https:\/\/secure.gravatar.com\/avatar\/5ce0355dcf546893c7ffd8066a35fdb9?s=16&#038;d=monsterid&#038;r=g' srcset='https:\/\/secure.gravatar.com\/avatar\/5ce0355dcf546893c7ffd8066a35fdb9?s=32&#038;d=monsterid&#038;r=g 2x' class='avatar avatar-16 photo' height='16' width='16' loading='lazy' decoding='async'\/><\/a><a href=\"https:\/\/profiles.wordpress.org\/miyauchi\/\" class=\"reviewer-name\">Takayuki Miyauchi <small>(miyauchi)<\/small><\/a> on <span class=\"review-date\">May 10, 2019<\/span>\t\t\t<\/p>\n\t\t<\/div>\n\t<\/div>\n\t<div class=\"review-body\">Works like a charm. :)<\/div>\n<\/div>\n"},"download_link":"https:\/\/downloads.wordpress.org\/plugin\/hagakure.1.2.0.zip","screenshots":[],"tags":{"error":"error","php":"php","recovery":"recovery"},"versions":{"0.8.0":"https:\/\/downloads.wordpress.org\/plugin\/hagakure.0.8.0.zip","1.0.3":"https:\/\/downloads.wordpress.org\/plugin\/hagakure.1.0.3.zip","1.0.4":"https:\/\/downloads.wordpress.org\/plugin\/hagakure.1.0.4.zip","1.1.0":"https:\/\/downloads.wordpress.org\/plugin\/hagakure.1.1.0.zip","1.2.0":"https:\/\/downloads.wordpress.org\/plugin\/hagakure.1.2.0.zip","trunk":"https:\/\/downloads.wordpress.org\/plugin\/hagakure.zip"},"donate_link":"","banners":{"low":"https:\/\/ps.w.org\/hagakure\/assets\/banner-772x250.jpg?rev=2085221","high":"https:\/\/ps.w.org\/hagakure\/assets\/banner-1544x500.jpg?rev=2085221"}}